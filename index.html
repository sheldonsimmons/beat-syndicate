<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beat Syndicate - Premium Beats</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Initialize Supabase
        const SUPABASE_URL = 'https://iggfzngtwaujmuctubrb.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlnZ2Z6bmd0d2F1am11Y3R1YnJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMDUwODQsImV4cCI6MjA4NjY4MTA4NH0.zHPND9_MraDwlGJQpla2TvwRlKTDjilU8DIM0ao1mJc';
        
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Icons components
        const ShoppingCart = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
        );

        const Play = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        );

        const Pause = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
        );

        const Check = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const Upload = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const Edit2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
            </svg>
        );

        const Trash2 = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Plus = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Music = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9 18V5l12-2v13"></path>
                <circle cx="6" cy="18" r="3"></circle>
                <circle cx="18" cy="16" r="3"></circle>
            </svg>
        );

        function BeatSyndicate() {
            const [cart, setCart] = useState([]);
            const [playingId, setPlayingId] = useState(null);
            const [selectedFilter, setSelectedFilter] = useState('all');
            const [isAdmin, setIsAdmin] = useState(false);
            const [showUploadModal, setShowUploadModal] = useState(false);
            const [beats, setBeats] = useState([]);
            const [loading, setLoading] = useState(true);
            const audioRef = useRef(new Audio());

            const [newBeat, setNewBeat] = useState({
                title: '',
                genre: 'Hip Hop',
                bpm: 140,
                key: 'Am',
                price: 35,
                tags: [],
                exclusive: false,
                previewFile: null,
                mp3File: null,
                wavFile: null,
                stemsFile: null
            });

            const [tagInput, setTagInput] = useState('');
            const [editingBeat, setEditingBeat] = useState(null);
            const [uploadProgress, setUploadProgress] = useState({});

            const licenses = [
                {
                    name: "Basic",
                    price: "base",
                    features: ["MP3 Format", "Non-Profit Use", "Up to 5,000 Streams", "Producer Tag Included"]
                },
                {
                    name: "Premium",
                    price: "×2",
                    features: ["WAV + MP3", "Unlimited Streams", "Music Videos Allowed", "Trackouts Available", "Producer Tag Removed"]
                },
                {
                    name: "Exclusive",
                    price: "×100",
                    features: ["Full Rights Transfer", "WAV Stems Included", "Producer Credit Only", "Beat Removed from Store", "Contract Included"]
                }
            ];

            const keyOptions = ['Am', 'A#m', 'Bm', 'Cm', 'C#m', 'Dm', 'D#m', 'Em', 'Fm', 'F#m', 'Gm', 'G#m',
                                'Amaj', 'A#maj', 'Bmaj', 'Cmaj', 'C#maj', 'Dmaj', 'D#maj', 'Emaj', 'Fmaj', 'F#maj', 'Gmaj', 'G#maj'];

            // Fetch beats from Supabase
            useEffect(() => {
                fetchBeats();
            }, []);

            const fetchBeats = async () => {
                try {
                    setLoading(true);
                    const { data, error } = await supabase
                        .from('beats')
                        .select('*')
                        .order('created_at', { ascending: false });

                    if (error) throw error;
                    setBeats(data || []);
                } catch (error) {
                    console.error('Error fetching beats:', error);
                    alert('Error loading beats. Please refresh the page.');
                } finally {
                    setLoading(false);
                }
            };

            // Upload file to Supabase Storage
            const uploadFile = async (file, bucket, path) => {
                try {
                    const { data, error } = await supabase.storage
                        .from(bucket)
                        .upload(path, file, {
                            cacheControl: '3600',
                            upsert: false
                        });

                    if (error) throw error;

                    // Get public URL
                    const { data: { publicUrl } } = supabase.storage
                        .from(bucket)
                        .getPublicUrl(path);

                    return publicUrl;
                } catch (error) {
                    console.error('Upload error:', error);
                    throw error;
                }
            };

            const handleFileUpload = (e, fileType) => {
                const file = e.target.files[0];
                if (file) {
                    setNewBeat({ ...newBeat, [fileType]: file });
                }
            };

            const addTag = () => {
                if (tagInput.trim() && !newBeat.tags.includes(tagInput.trim())) {
                    setNewBeat({ ...newBeat, tags: [...newBeat.tags, tagInput.trim()] });
                    setTagInput('');
                }
            };

            const removeTag = (tagToRemove) => {
                setNewBeat({ ...newBeat, tags: newBeat.tags.filter(tag => tag !== tagToRemove) });
            };

            const saveBeat = async () => {
                if (!newBeat.title || !newBeat.previewFile) {
                    alert('Please provide at least a title and preview file');
                    return;
                }

                try {
                    setUploadProgress({ status: 'Uploading preview...' });

                    // Upload preview file
                    const timestamp = Date.now();
                    const previewPath = `${timestamp}-${newBeat.previewFile.name}`;
                    const previewUrl = await uploadFile(newBeat.previewFile, 'beat-previews', previewPath);

                    // Upload other files if they exist
                    let mp3Url = null, wavUrl = null, stemsUrl = null;

                    if (newBeat.mp3File) {
                        setUploadProgress({ status: 'Uploading MP3...' });
                        const mp3Path = `${timestamp}-${newBeat.mp3File.name}`;
                        mp3Url = await uploadFile(newBeat.mp3File, 'beat-files', mp3Path);
                    }

                    if (newBeat.wavFile) {
                        setUploadProgress({ status: 'Uploading WAV...' });
                        const wavPath = `${timestamp}-${newBeat.wavFile.name}`;
                        wavUrl = await uploadFile(newBeat.wavFile, 'beat-files', wavPath);
                    }

                    if (newBeat.stemsFile) {
                        setUploadProgress({ status: 'Uploading stems...' });
                        const stemsPath = `${timestamp}-${newBeat.stemsFile.name}`;
                        stemsUrl = await uploadFile(newBeat.stemsFile, 'beat-files', stemsPath);
                    }

                    setUploadProgress({ status: 'Saving to database...' });

                    // Save to database
                    const beatData = {
                        title: newBeat.title,
                        genre: newBeat.genre,
                        bpm: newBeat.bpm,
                        key: newBeat.key,
                        price: newBeat.price,
                        tags: newBeat.tags,
                        exclusive: newBeat.exclusive,
                        preview_url: previewUrl,
                        mp3_url: mp3Url,
                        wav_url: wavUrl,
                        stems_url: stemsUrl
                    };

                    if (editingBeat) {
                        const { error } = await supabase
                            .from('beats')
                            .update(beatData)
                            .eq('id', editingBeat.id);

                        if (error) throw error;
                    } else {
                        const { error } = await supabase
                            .from('beats')
                            .insert([beatData]);

                        if (error) throw error;
                    }

                    // Reset form and refresh beats
                    setNewBeat({
                        title: '',
                        genre: 'Hip Hop',
                        bpm: 140,
                        key: 'Am',
                        price: 35,
                        tags: [],
                        exclusive: false,
                        previewFile: null,
                        mp3File: null,
                        wavFile: null,
                        stemsFile: null
                    });
                    setShowUploadModal(false);
                    setEditingBeat(null);
                    setUploadProgress({});
                    await fetchBeats();
                    alert('Beat uploaded successfully!');
                } catch (error) {
                    console.error('Error saving beat:', error);
                    alert('Error uploading beat: ' + error.message);
                    setUploadProgress({});
                }
            };

            const deleteBeat = async (beatId) => {
                if (!confirm('Are you sure you want to delete this beat?')) return;

                try {
                    const { error } = await supabase
                        .from('beats')
                        .delete()
                        .eq('id', beatId);

                    if (error) throw error;

                    await fetchBeats();
                    alert('Beat deleted successfully!');
                } catch (error) {
                    console.error('Error deleting beat:', error);
                    alert('Error deleting beat: ' + error.message);
                }
            };

            const startEdit = (beat) => {
                setEditingBeat(beat);
                setNewBeat({
                    title: beat.title,
                    genre: beat.genre,
                    bpm: beat.bpm,
                    key: beat.key,
                    price: beat.price,
                    tags: beat.tags || [],
                    exclusive: beat.exclusive,
                    previewFile: null,
                    mp3File: null,
                    wavFile: null,
                    stemsFile: null
                });
                setShowUploadModal(true);
            };

            const addToCart = (beat, license = 'Basic') => {
                const cartItem = {
                    ...beat,
                    license,
                    cartId: `${beat.id}-${license}-${Date.now()}`
                };
                setCart([...cart, cartItem]);
            };

            const removeFromCart = (cartId) => {
                setCart(cart.filter(item => item.cartId !== cartId));
            };

            const togglePlay = async (beat) => {
                if (playingId === beat.id) {
                    audioRef.current.pause();
                    setPlayingId(null);
                } else {
                    if (beat.preview_url) {
                        audioRef.current.src = beat.preview_url;
                        try {
                            await audioRef.current.play();
                            setPlayingId(beat.id);
                        } catch (error) {
                            console.error('Error playing audio:', error);
                            alert('Error playing preview. Please try again.');
                        }
                    } else {
                        alert('No preview available for this beat');
                    }
                }
            };

            // Handle audio ended
            useEffect(() => {
                const audio = audioRef.current;
                const handleEnded = () => setPlayingId(null);
                audio.addEventListener('ended', handleEnded);
                return () => audio.removeEventListener('ended', handleEnded);
            }, []);

            const filteredBeats = selectedFilter === 'all' 
                ? beats 
                : beats.filter(beat => beat.genre === selectedFilter);

            const cartTotal = cart.reduce((sum, item) => {
                let multiplier = 1;
                if (item.license === 'Premium') multiplier = 2;
                if (item.license === 'Exclusive') multiplier = 100;
                return sum + (item.price * multiplier);
            }, 0);

            return (
                <div className="min-h-screen bg-black text-white">
                    {/* Header */}
                    <header className="border-b border-gray-800 sticky top-0 bg-black z-50">
                        <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
                            <img src="data:image/png;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx7/2wBDAQUFBQcGBw4ICA4eFBEUHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh7/wAARCAQABgADASIAAhEBAxEB/8QAHQABAAICAwEBAAAAAAAAAAAAAAEIBQYEBQYDAv/E" alt="Beat Syndicate" className="h-40 md:h-48" />
                            <div className="flex items-center gap-6">
                                <nav className="hidden md:flex gap-6 text-sm">
                                    <a href="#beats" className="hover:text-yellow-400 transition">Beats</a>
                                    <a href="#licenses" className="hover:text-yellow-400 transition">Licenses</a>
                                    <a href="#contact" className="hover:text-yellow-400 transition">Contact</a>
                                </nav>
                                <button 
                                    onClick={() => setIsAdmin(!isAdmin)}
                                    className="text-xs bg-gray-800 px-3 py-1 rounded hover:bg-gray-700 transition"
                                >
                                    {isAdmin ? 'Customer View' : 'Admin Login'}
                                </button>
                                <button className="relative p-2 hover:bg-gray-900 rounded-lg transition">
                                    <ShoppingCart size={20} />
                                    {cart.length > 0 && (
                                        <span className="absolute -top-1 -right-1 bg-yellow-400 text-black text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold">
                                            {cart.length}
                                        </span>
                                    )}
                                </button>
                            </div>
                        </div>
                    </header>

                    {/* Hero */}
                    <section className="relative py-20 px-4">
                        <div className="max-w-7xl mx-auto text-center">
                            <h1 className="text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-yellow-400 to-yellow-200 bg-clip-text text-transparent">
                                Premium Beats for Serious Artists
                            </h1>
                            <p className="text-xl text-gray-400 mb-8 max-w-2xl mx-auto">
                                MPC & Maschine crafted beats. Hip Hop & R&B production that elevates your sound.
                            </p>
                            <div className="flex gap-4 justify-center flex-wrap">
                                <a 
                                    href="#beats" 
                                    className="inline-block bg-yellow-400 text-black px-8 py-3 rounded-full font-semibold hover:bg-yellow-300 transition"
                                >
                                    Browse Beats
                                </a>
                                {isAdmin && (
                                    <button
                                        onClick={() => {
                                            setEditingBeat(null);
                                            setNewBeat({
                                                title: '',
                                                genre: 'Hip Hop',
                                                bpm: 140,
                                                key: 'Am',
                                                price: 35,
                                                tags: [],
                                                exclusive: false,
                                                previewFile: null,
                                                mp3File: null,
                                                wavFile: null,
                                                stemsFile: null
                                            });
                                            setShowUploadModal(true);
                                        }}
                                        className="inline-flex items-center gap-2 bg-green-600 text-white px-8 py-3 rounded-full font-semibold hover:bg-green-500 transition"
                                    >
                                        <Plus size={20} />
                                        Upload New Beat
                                    </button>
                                )}
                            </div>
                        </div>
                    </section>

                    {/* Filter */}
                    <section id="beats" className="max-w-7xl mx-auto px-4 py-8">
                        <div className="flex gap-4 justify-center mb-8 flex-wrap">
                            {['all', 'Hip Hop', 'R&B'].map(filter => (
                                <button
                                    key={filter}
                                    onClick={() => setSelectedFilter(filter)}
                                    className={`px-6 py-2 rounded-full font-medium transition ${
                                        selectedFilter === filter
                                            ? 'bg-yellow-400 text-black'
                                            : 'bg-gray-900 text-gray-400 hover:bg-gray-800'
                                    }`}
                                >
                                    {filter === 'all' ? 'All Beats' : filter}
                                </button>
                            ))}
                        </div>

                        {/* Admin Stats */}
                        {isAdmin && (
                            <div className="bg-gray-900 rounded-lg p-6 mb-8 border border-yellow-400">
                                <h3 className="text-xl font-bold mb-4">Inventory Stats</h3>
                                <div className="grid grid-cols-3 gap-4">
                                    <div className="bg-gray-800 p-4 rounded">
                                        <p className="text-gray-400 text-sm">Total Beats</p>
                                        <p className="text-3xl font-bold text-yellow-400">{beats.length}</p>
                                    </div>
                                    <div className="bg-gray-800 p-4 rounded">
                                        <p className="text-gray-400 text-sm">Hip Hop</p>
                                        <p className="text-3xl font-bold">{beats.filter(b => b.genre === 'Hip Hop').length}</p>
                                    </div>
                                    <div className="bg-gray-800 p-4 rounded">
                                        <p className="text-gray-400 text-sm">R&B</p>
                                        <p className="text-3xl font-bold">{beats.filter(b => b.genre === 'R&B').length}</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Loading State */}
                        {loading && (
                            <div className="text-center py-20">
                                <div className="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-400"></div>
                                <p className="mt-4 text-gray-400">Loading beats...</p>
                            </div>
                        )}

                        {/* Beats Grid */}
                        {!loading && (
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {filteredBeats.map(beat => (
                                    <div key={beat.id} className="bg-gray-900 rounded-lg overflow-hidden border border-gray-800 hover:border-yellow-400 transition group">
                                        <div className="p-6">
                                            <div className="flex items-start justify-between mb-4">
                                                <div className="flex-1">
                                                    <h3 className="text-xl font-bold mb-1">{beat.title}</h3>
                                                    <p className="text-gray-400 text-sm">{beat.genre}</p>
                                                </div>
                                                <div className="flex gap-2">
                                                    {beat.exclusive && (
                                                        <span className="bg-yellow-400 text-black text-xs px-2 py-1 rounded-full font-bold">
                                                            EXCLUSIVE
                                                        </span>
                                                    )}
                                                    {isAdmin && (
                                                        <div className="flex gap-1">
                                                            <button
                                                                onClick={() => startEdit(beat)}
                                                                className="bg-blue-600 p-1.5 rounded hover:bg-blue-500 transition"
                                                            >
                                                                <Edit2 size={14} />
                                                            </button>
                                                            <button
                                                                onClick={() => deleteBeat(beat.id)}
                                                                className="bg-red-600 p-1.5 rounded hover:bg-red-500 transition"
                                                            >
                                                                <Trash2 size={14} />
                                                            </button>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>

                                            <div className="flex gap-4 text-sm text-gray-400 mb-4">
                                                <span>{beat.bpm} BPM</span>
                                                <span>•</span>
                                                <span>{beat.key}</span>
                                            </div>

                                            <div className="flex flex-wrap gap-2 mb-4">
                                                {(beat.tags || []).map(tag => (
                                                    <span key={tag} className="bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded">
                                                        #{tag}
                                                    </span>
                                                ))}
                                            </div>

                                            <div className="flex items-center justify-between">
                                                <button
                                                    onClick={() => togglePlay(beat)}
                                                    className="bg-yellow-400 text-black p-3 rounded-full hover:bg-yellow-300 transition"
                                                    disabled={!beat.preview_url}
                                                >
                                                    {playingId === beat.id ? <Pause size={20} /> : <Play size={20} />}
                                                </button>
                                                <span className="text-2xl font-bold text-yellow-400">
                                                    ${beat.price?.toLocaleString() || '0'}
                                                </span>
                                            </div>

                                            {!isAdmin && (
                                                <button
                                                    onClick={() => addToCart(beat)}
                                                    className="w-full mt-4 bg-gray-800 hover:bg-yellow-400 hover:text-black text-white py-3 rounded-lg font-semibold transition"
                                                >
                                                    Add to Cart
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {!loading && filteredBeats.length === 0 && (
                            <div className="text-center py-20">
                                <Music size={64} className="mx-auto text-gray-600 mb-4" />
                                <p className="text-gray-400 text-xl">No beats found</p>
                                {isAdmin && (
                                    <button
                                        onClick={() => setShowUploadModal(true)}
                                        className="mt-4 bg-yellow-400 text-black px-6 py-2 rounded-full font-semibold hover:bg-yellow-300 transition"
                                    >
                                        Upload Your First Beat
                                    </button>
                                )}
                            </div>
                        )}
                    </section>

                    {/* Upload Modal - CONTINUED IN NEXT PART */}
                    {/* Upload Modal */}
                    {showUploadModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 overflow-y-auto">
                            <div className="bg-gray-900 rounded-lg max-w-2xl w-full my-8">
                                <div className="sticky top-0 bg-gray-900 border-b border-gray-800 p-6 flex items-center justify-between">
                                    <h2 className="text-2xl font-bold flex items-center gap-2">
                                        <Music className="text-yellow-400" />
                                        {editingBeat ? 'Edit Beat' : 'Upload New Beat'}
                                    </h2>
                                    <button
                                        onClick={() => {
                                            setShowUploadModal(false);
                                            setEditingBeat(null);
                                            setUploadProgress({});
                                        }}
                                        className="text-gray-400 hover:text-white"
                                    >
                                        <X size={24} />
                                    </button>
                                </div>

                                <div className="p-6 space-y-6">
                                    {uploadProgress.status && (
                                        <div className="bg-blue-900 border border-blue-700 rounded-lg p-4 text-center">
                                            <div className="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-400 mb-2"></div>
                                            <p className="text-blue-200">{uploadProgress.status}</p>
                                        </div>
                                    )}

                                    {/* Title */}
                                    <div>
                                        <label className="block text-sm font-semibold mb-2">Beat Title *</label>
                                        <input
                                            type="text"
                                            value={newBeat.title}
                                            onChange={(e) => setNewBeat({ ...newBeat, title: e.target.value })}
                                            className="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-yellow-400 text-white"
                                            placeholder="e.g., Midnight Drive"
                                        />
                                    </div>

                                    {/* Genre and Price */}
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Genre</label>
                                            <select
                                                value={newBeat.genre}
                                                onChange={(e) => setNewBeat({ ...newBeat, genre: e.target.value })}
                                                className="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-yellow-400 text-white"
                                            >
                                                <option>Hip Hop</option>
                                                <option>R&B</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Price ($)</label>
                                            <input
                                                type="number"
                                                value={newBeat.price}
                                                onChange={(e) => setNewBeat({ ...newBeat, price: parseFloat(e.target.value) || 0 })}
                                                className="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-yellow-400 text-white"
                                                min="20"
                                                max="5000"
                                                step="5"
                                            />
                                        </div>
                                    </div>

                                    {/* BPM and Key */}
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">BPM</label>
                                            <input
                                                type="number"
                                                value={newBeat.bpm}
                                                onChange={(e) => setNewBeat({ ...newBeat, bpm: parseInt(e.target.value) || 0 })}
                                                className="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-yellow-400 text-white"
                                                min="60"
                                                max="200"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Key</label>
                                            <select
                                                value={newBeat.key}
                                                onChange={(e) => setNewBeat({ ...newBeat, key: e.target.value })}
                                                className="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-yellow-400 text-white"
                                            >
                                                {keyOptions.map(key => (
                                                    <option key={key} value={key}>{key}</option>
                                                ))}
                                            </select>
                                        </div>
                                    </div>

                                    {/* Tags */}
                                    <div>
                                        <label className="block text-sm font-semibold mb-2">Tags</label>
                                        <div className="flex gap-2 mb-2">
                                            <input
                                                type="text"
                                                value={tagInput}
                                                onChange={(e) => setTagInput(e.target.value)}
                                                onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addTag())}
                                                className="flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 focus:outline-none focus:border-yellow-400 text-white"
                                                placeholder="Add tag..."
                                            />
                                            <button
                                                onClick={addTag}
                                                type="button"
                                                className="bg-yellow-400 text-black px-4 py-2 rounded-lg font-semibold hover:bg-yellow-300"
                                            >
                                                Add
                                            </button>
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {newBeat.tags.map(tag => (
                                                <span key={tag} className="bg-gray-800 text-gray-300 px-3 py-1 rounded-full text-sm flex items-center gap-2">
                                                    #{tag}
                                                    <button onClick={() => removeTag(tag)} className="text-red-400 hover:text-red-300">
                                                        <X size={14} />
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Exclusive */}
                                    <div className="flex items-center gap-3">
                                        <input
                                            type="checkbox"
                                            id="exclusive"
                                            checked={newBeat.exclusive}
                                            onChange={(e) => setNewBeat({ ...newBeat, exclusive: e.target.checked })}
                                            className="w-5 h-5 accent-yellow-400"
                                        />
                                        <label htmlFor="exclusive" className="font-semibold">Mark as Exclusive</label>
                                    </div>

                                    {/* File Uploads */}
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Preview (MP3) *</label>
                                            <div className="border-2 border-dashed border-gray-700 rounded-lg p-6 text-center hover:border-yellow-400 transition">
                                                <input
                                                    type="file"
                                                    accept="audio/mp3,audio/mpeg"
                                                    onChange={(e) => handleFileUpload(e, 'previewFile')}
                                                    className="hidden"
                                                    id="preview-upload"
                                                />
                                                <label htmlFor="preview-upload" className="cursor-pointer">
                                                    <Upload className="mx-auto mb-2 text-yellow-400" size={32} />
                                                    <p className="text-sm text-gray-400">
                                                        {newBeat.previewFile ? newBeat.previewFile.name : (editingBeat && editingBeat.preview_url ? 'Preview exists - upload new to replace' : 'Click to upload preview MP3')}
                                                    </p>
                                                </label>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Full Beat MP3 (Tagged)</label>
                                            <div className="border-2 border-dashed border-gray-700 rounded-lg p-4 text-center hover:border-yellow-400 transition">
                                                <input
                                                    type="file"
                                                    accept="audio/mp3,audio/mpeg"
                                                    onChange={(e) => handleFileUpload(e, 'mp3File')}
                                                    className="hidden"
                                                    id="mp3-upload"
                                                />
                                                <label htmlFor="mp3-upload" className="cursor-pointer text-sm text-gray-400">
                                                    {newBeat.mp3File ? newBeat.mp3File.name : 'Upload tagged MP3'}
                                                </label>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold mb-2">WAV File (Premium)</label>
                                            <div className="border-2 border-dashed border-gray-700 rounded-lg p-4 text-center hover:border-yellow-400 transition">
                                                <input
                                                    type="file"
                                                    accept="audio/wav"
                                                    onChange={(e) => handleFileUpload(e, 'wavFile')}
                                                    className="hidden"
                                                    id="wav-upload"
                                                />
                                                <label htmlFor="wav-upload" className="cursor-pointer text-sm text-gray-400">
                                                    {newBeat.wavFile ? newBeat.wavFile.name : 'Upload WAV'}
                                                </label>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold mb-2">Stems (ZIP - Exclusive)</label>
                                            <div className="border-2 border-dashed border-gray-700 rounded-lg p-4 text-center hover:border-yellow-400 transition">
                                                <input
                                                    type="file"
                                                    accept=".zip"
                                                    onChange={(e) => handleFileUpload(e, 'stemsFile')}
                                                    className="hidden"
                                                    id="stems-upload"
                                                />
                                                <label htmlFor="stems-upload" className="cursor-pointer text-sm text-gray-400">
                                                    {newBeat.stemsFile ? newBeat.stemsFile.name : 'Upload stems ZIP'}
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Action Buttons */}
                                    <div className="flex gap-4 pt-4">
                                        <button
                                            onClick={saveBeat}
                                            disabled={uploadProgress.status}
                                            className="flex-1 bg-yellow-400 text-black py-3 rounded-lg font-bold hover:bg-yellow-300 transition disabled:opacity-50 disabled:cursor-not-allowed"
                                        >
                                            {editingBeat ? 'Update Beat' : 'Upload Beat'}
                                        </button>
                                        <button
                                            onClick={() => {
                                                setShowUploadModal(false);
                                                setEditingBeat(null);
                                                setUploadProgress({});
                                            }}
                                            disabled={uploadProgress.status}
                                            className="px-6 bg-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-700 transition disabled:opacity-50"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Licenses */}
                    <section id="licenses" className="max-w-7xl mx-auto px-4 py-20">
                        <h2 className="text-4xl font-bold text-center mb-12">License Options</h2>
                        <div className="grid md:grid-cols-3 gap-8">
                            {licenses.map((license, idx) => (
                                <div key={license.name} className={`bg-gray-900 p-8 rounded-lg border-2 ${
                                    idx === 1 ? 'border-yellow-400' : 'border-gray-800'
                                }`}>
                                    <h3 className="text-2xl font-bold mb-2">{license.name}</h3>
                                    <p className="text-3xl font-bold text-yellow-400 mb-6">{license.price}</p>
                                    <ul className="space-y-3">
                                        {license.features.map(feature => (
                                            <li key={feature} className="flex items-start gap-2">
                                                <Check size={20} className="text-yellow-400 mt-0.5 flex-shrink-0" />
                                                <span className="text-gray-300">{feature}</span>
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            ))}
                        </div>
                    </section>

                    {/* Cart Sidebar */}
                    {cart.length > 0 && !isAdmin && (
                        <div className="fixed right-4 bottom-4 bg-gray-900 border border-yellow-400 rounded-lg p-4 w-80 shadow-2xl max-h-[80vh] overflow-y-auto">
                            <h3 className="text-xl font-bold mb-4">Cart ({cart.length})</h3>
                            <div className="space-y-2 mb-4">
                                {cart.map(item => (
                                    <div key={item.cartId} className="bg-gray-800 p-3 rounded flex justify-between items-center">
                                        <div className="flex-1">
                                            <p className="font-semibold text-sm">{item.title}</p>
                                            <p className="text-xs text-gray-400">{item.license} License</p>
                                        </div>
                                        <button
                                            onClick={() => removeFromCart(item.cartId)}
                                            className="text-red-400 hover:text-red-300 text-xs ml-2"
                                        >
                                            Remove
                                        </button>
                                    </div>
                                ))}
                            </div>
                            <div className="border-t border-gray-700 pt-4">
                                <div className="flex justify-between items-center mb-4">
                                    <span className="font-bold">Total:</span>
                                    <span className="text-2xl font-bold text-yellow-400">${cartTotal.toLocaleString()}</span>
                                </div>
                                <button className="w-full bg-yellow-400 text-black py-3 rounded-lg font-bold hover:bg-yellow-300 transition">
                                    Checkout
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Footer */}
                    <footer id="contact" className="border-t border-gray-800 mt-20">
                        <div className="max-w-7xl mx-auto px-4 py-12 text-center">
                            <h3 className="text-2xl font-bold mb-4">Ready to Work Together?</h3>
                            <p className="text-gray-400 mb-6">Contact for custom production and exclusive deals</p>
                            <a 
                                href="mailto:contact@beatsyndicate.com" 
                                className="inline-block bg-yellow-400 text-black px-8 py-3 rounded-full font-semibold hover:bg-yellow-300 transition"
                            >
                                Get in Touch
                            </a>
                            <p className="text-gray-600 text-sm mt-8">© 2026 Beat Syndicate. All rights reserved.</p>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<BeatSyndicate />, document.getElementById('root'));
    </script>
</body>
</html>
